!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("crypto"),require("buffer")):"function"==typeof define&&define.amd?define(["crypto","buffer"],r):(t=t||self)["@wonderlandlabs/mirror"]=r(t.crypto,t.buffer)}(this,(function(t,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,r)};function n(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function o(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,i=e.call(t),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u}function u(t,r){for(var e=0,n=r.length,o=t.length;e<n;e++,o++)t[o]=r[e];return t}function a(t){return"function"==typeof t}function c(t){var r=t((function(t){Error.call(t),t.stack=(new Error).stack}));return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var s=c((function(t){return function(r){t(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r}}));function f(t,r){if(t){var e=t.indexOf(r);0<=e&&t.splice(e,1)}}var l=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var r;return t.prototype.unsubscribe=function(){var t,r,e,n,c;if(!this.closed){this.closed=!0;var f=this._parentage;if(f)if(this._parentage=null,Array.isArray(f))try{for(var l=o(f),p=l.next();!p.done;p=l.next()){p.value.remove(this)}}catch(r){t={error:r}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}else f.remove(this);var v=this.initialTeardown;if(a(v))try{v()}catch(t){c=t instanceof s?t.errors:[t]}var d=this._teardowns;if(d){this._teardowns=null;try{for(var y=o(d),b=y.next();!b.done;b=y.next()){var _=b.value;try{h(_)}catch(t){c=null!=c?c:[],t instanceof s?c=u(u([],i(c)),i(t.errors)):c.push(t)}}}catch(t){e={error:t}}finally{try{b&&!b.done&&(n=y.return)&&n.call(y)}finally{if(e)throw e.error}}}if(c)throw new s(c)}},t.prototype.add=function(r){var e;if(r&&r!==this)if(this.closed)h(r);else{if(r instanceof t){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(r)}},t.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},t.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},t.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&f(r,t)},t.prototype.remove=function(r){var e=this._teardowns;e&&f(e,r),r instanceof t&&r._removeParent(this)},t.EMPTY=((r=new t).closed=!0,r),t}(),p=l.EMPTY;function v(t){return t instanceof l||t&&"closed"in t&&a(t.remove)&&a(t.add)&&a(t.unsubscribe)}function h(t){a(t)?t():t.unsubscribe()}var d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},y={setTimeout:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=y.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,u([],i(t)))},clearTimeout:function(t){var r=y.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(t)},delegate:void 0};function b(t){y.setTimeout((function(){throw t}))}function _(){}function g(t){t()}var m=function(t){function r(r){var e=t.call(this)||this;return e.isStopped=!1,r?(e.destination=r,v(r)&&r.add(e)):e.destination=O,e}return n(r,t),r.create=function(t,r,e){return new j(t,r,e)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(l),j=function(t){function r(r,e,n){var o,i=t.call(this)||this;if(a(r))o=r;else if(r){var u;o=r.next,e=r.error,n=r.complete,i&&d.useDeprecatedNextContext?(u=Object.create(r)).unsubscribe=function(){return i.unsubscribe()}:u=r,o=null==o?void 0:o.bind(u),e=null==e?void 0:e.bind(u),n=null==n?void 0:n.bind(u)}return i.destination={next:o?w(o):_,error:w(null!=e?e:E),complete:n?w(n):_},i}return n(r,t),r}(m);function w(t,r){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{t.apply(void 0,u([],i(r)))}catch(t){b(t)}}}function E(t){throw t}var O={closed:!0,next:_,error:E,complete:_},A="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(t){return t}function P(t){return 0===t.length?S:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var T=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n,o=this,i=(n=t)&&n instanceof m||function(t){return t&&a(t.next)&&a(t.error)&&a(t.complete)}(n)&&v(n)?t:new j(t,r,e);return g((function(){var t=o,r=t.operator,e=t.source;i.add(r?r.call(i,e):e?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=x(r))((function(r,n){var o;o=e.subscribe((function(r){try{t(r)}catch(t){n(t),null==o||o.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)},t.prototype[A]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return P(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=x(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function x(t){var r;return null!==(r=null!=t?t:d.Promise)&&void 0!==r?r:Promise}function $(t){return function(r){if(function(t){return a(null==t?void 0:t.lift)}(r))return r.lift((function(r){try{return t(r,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var N=function(t){function r(r,e,n,o,i){var u=t.call(this,r)||this;return u.onFinalize=i,u._next=e?function(t){try{e(t)}catch(t){r.error(t)}}:t.prototype._next,u._error=o?function(t){try{o(t)}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=n?function(){try{n()}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,u}return n(r,t),r.prototype.unsubscribe=function(){var r,e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(r=this.onFinalize)||void 0===r||r.call(this))},r}(m),I=c((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),D=function(t){function r(){var r=t.call(this)||this;return r.closed=!1,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return n(r,t),r.prototype.lift=function(t){var r=new z(this,this);return r.operator=t,r},r.prototype._throwIfClosed=function(){if(this.closed)throw new I},r.prototype.next=function(t){var r=this;g((function(){var e,n;if(r._throwIfClosed(),!r.isStopped){var i=r.observers.slice();try{for(var u=o(i),a=u.next();!a.done;a=u.next()){a.value.next(t)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}}}))},r.prototype.error=function(t){var r=this;g((function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}}))},r.prototype.complete=function(){var t=this;g((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}}))},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var r=this.hasError,e=this.isStopped,n=this.observers;return r||e?p:(n.push(t),new l((function(){return f(n,t)})))},r.prototype._checkFinalizedStatuses=function(t){var r=this.hasError,e=this.thrownError,n=this.isStopped;r?t.error(e):n&&t.complete()},r.prototype.asObservable=function(){var t=new T;return t.source=this,t},r.create=function(t,r){return new z(t,r)},r}(T),z=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return n(r,t),r.prototype.next=function(t){var r,e;null===(e=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===e||e.call(r,t)},r.prototype.error=function(t){var r,e;null===(e=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===e||e.call(r,t)},r.prototype.complete=function(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)},r.prototype._subscribe=function(t){var r,e;return null!==(e=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==e?e:p},r}(D),C=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return n(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){var t=this.hasError,r=this.thrownError,e=this._value;if(t)throw r;return this._throwIfClosed(),e},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(D);function F(t,r,e){return r in t||(t[r]=e(t,r)),t[r]}const k=new Uint8Array(256);let M=k.length;function R(){return M>k.length-16&&(t.randomFillSync(k),M=0),k.slice(M,M+=16)}var U=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function V(t){return"string"==typeof t&&U.test(t)}const Y=[];for(let t=0;t<256;++t)Y.push((t+256).toString(16).substr(1));function L(t,r=0){const e=(Y[t[r+0]]+Y[t[r+1]]+Y[t[r+2]]+Y[t[r+3]]+"-"+Y[t[r+4]]+Y[t[r+5]]+"-"+Y[t[r+6]]+Y[t[r+7]]+"-"+Y[t[r+8]]+Y[t[r+9]]+"-"+Y[t[r+10]]+Y[t[r+11]]+Y[t[r+12]]+Y[t[r+13]]+Y[t[r+14]]+Y[t[r+15]]).toLowerCase();if(!V(e))throw TypeError("Stringified UUID is invalid");return e}let B,q,H=0,W=0;function K(t){if(!V(t))throw TypeError("Invalid UUID");let r;const e=new Uint8Array(16);return e[0]=(r=parseInt(t.slice(0,8),16))>>>24,e[1]=r>>>16&255,e[2]=r>>>8&255,e[3]=255&r,e[4]=(r=parseInt(t.slice(9,13),16))>>>8,e[5]=255&r,e[6]=(r=parseInt(t.slice(14,18),16))>>>8,e[7]=255&r,e[8]=(r=parseInt(t.slice(19,23),16))>>>8,e[9]=255&r,e[10]=(r=parseInt(t.slice(24,36),16))/1099511627776&255,e[11]=r/4294967296&255,e[12]=r>>>24&255,e[13]=r>>>16&255,e[14]=r>>>8&255,e[15]=255&r,e}function G(t,r,e){function n(t,n,o,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(t)),"string"==typeof n&&(n=K(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+t.length);if(u.set(n),u.set(t,n.length),u=e(u),u[6]=15&u[6]|r,u[8]=63&u[8]|128,o){i=i||0;for(let t=0;t<16;++t)o[i+t]=u[t];return o}return L(u)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const J=G("v3",48,(function(r){return Array.isArray(r)?r=Buffer.from(r):"string"==typeof r&&(r=Buffer.from(r,"utf8")),t.createHash("md5").update(r).digest()}));const X=G("v5",80,(function(r){return Array.isArray(r)?r=Buffer.from(r):"string"==typeof r&&(r=Buffer.from(r,"utf8")),t.createHash("sha1").update(r).digest()}));for(var Q=Object.freeze({__proto__:null,v1:function(t,r,e){let n=r&&e||0;const o=r||new Array(16);let i=(t=t||{}).node||B,u=void 0!==t.clockseq?t.clockseq:q;if(null==i||null==u){const r=t.random||(t.rng||R)();null==i&&(i=B=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==u&&(u=q=16383&(r[6]<<8|r[7]))}let a=void 0!==t.msecs?t.msecs:Date.now(),c=void 0!==t.nsecs?t.nsecs:W+1;const s=a-H+(c-W)/1e4;if(s<0&&void 0===t.clockseq&&(u=u+1&16383),(s<0||a>H)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");H=a,W=c,q=u,a+=122192928e5;const f=(1e4*(268435455&a)+c)%4294967296;o[n++]=f>>>24&255,o[n++]=f>>>16&255,o[n++]=f>>>8&255,o[n++]=255&f;const l=a/4294967296*1e4&268435455;o[n++]=l>>>8&255,o[n++]=255&l,o[n++]=l>>>24&15|16,o[n++]=l>>>16&255,o[n++]=u>>>8|128,o[n++]=255&u;for(let t=0;t<6;++t)o[n+t]=i[t];return r||L(o)},v3:J,v4:function(t,r,e){const n=(t=t||{}).random||(t.rng||R)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){e=e||0;for(let t=0;t<16;++t)r[e+t]=n[t];return r}return L(n)},v5:X,NIL:"00000000-0000-0000-0000-000000000000",version:function(t){if(!V(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)},validate:V,stringify:L,parse:K}),Z="function"==typeof t.randomUUID?t.randomUUID:Q.v4,tt=[],rt={},et=0;et<256;et++)tt[et]=(et+256).toString(16).substr(1),rt[tt[et]]=et;var nt={parse:function(t,r,e){var n=r&&e||0,o=0;for(r=r||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,(function(t){o<16&&(r[n+o++]=rt[t])}));o<16;)r[n+o++]=0;return r},unparse:function(t,r){var e=r||0,n=tt;return n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+"-"+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]+n[t[e++]]}};const ot=Math.pow(2,31)-1,it=r.Buffer;function ut(t,r){let e=it.from(nt.parse(t)).toString("base64");const n=e.length;return r?("="===e[n-2]&&"="===e[n-1]&&(e=e.substr(0,n-2)+"-"),e.replace(/\+/g,"_").replace(/\//g,"-")):"="===e[n-2]&&"="===e[n-1]?e.substr(0,n-2)+"/":e}function at(t,r){!!(r=r||{}).urlSafe&&(t=t.replace(/-/g,"/").replace(/_/g,"+"));const e=t.lastIndexOf("/");if(-1===e)return null;const n=t.substring(0,e),o=Number(t.substring(e+1));if(!n||isNaN(o))return null;return{uuid:nt.unparse(it.from(n+"==","base64")),count:o}}var ct=function(t){let r=!1,e=!1;"boolean"==typeof t?r=t:(e=!!(t=t||{}).urlSafe,r=!!t.fixedLength),i.uuid=Z(),i.decode=at;let n=ut(i.uuid,e),o=Math.floor(t.startFrom||0);if(isNaN(o)||!(ot>o&&o>=0))throw new Error([`when passed, opts.startFrom must be a number between 0 and ${ot}.`,"Only the integer part matters.","- got: "+t.startFrom].join("\n"));return i;function i(){const t=r?n+function(t){return t<10?"000000000"+t:t<100?"00000000"+t:t<1e3?"0000000"+t:t<1e4?"000000"+t:t<1e5?"00000"+t:t<1e6?"0000"+t:t<1e7?"000"+t:t<1e8?"00"+t:t<1e9?"0"+t:t}(o++):n+o++;return o===ot&&(i.uuid=Z(),n=ut(i.uuid,e),o=0),t}},st=at;ct.decode=st;const ft=ct();function lt(){return ft()}var pt=Object.freeze({__proto__:null,default:lt});function vt(t){for(var r=arguments.length,e=Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];if("production"!==process.env.NODE_ENV){var o=tr[t],i=o?"function"==typeof o?o.apply(null,e):o:"unknown error nr: "+t;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+t+(e.length?" "+e.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ht(t){return!!t&&!!t[Zt]}function dt(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var r=Object.getPrototypeOf(t);if(null===r)return!0;var e=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return e===Object||"function"==typeof e&&Function.toString.call(e)===rr}(t)||Array.isArray(t)||!!t[Qt]||!!t.constructor[Qt]||mt(t)||jt(t))}function yt(t,r,e){void 0===e&&(e=!1),0===bt(t)?(e?Object.keys:er)(t).forEach((function(n){e&&"symbol"==typeof n||r(n,t[n],t)})):t.forEach((function(e,n){return r(n,e,t)}))}function bt(t){var r=t[Zt];return r?r.i>3?r.i-4:r.i:Array.isArray(t)?1:mt(t)?2:jt(t)?3:0}function _t(t,r){return 2===bt(t)?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function gt(t,r,e){var n=bt(t);2===n?t.set(r,e):3===n?(t.delete(r),t.add(e)):t[r]=e}function mt(t){return Kt&&t instanceof Map}function jt(t){return Gt&&t instanceof Set}function wt(t){return t.o||t.t}function Et(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var r=nr(t);delete r[Zt];for(var e=er(r),n=0;n<e.length;n++){var o=e[n],i=r[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),r)}function Ot(t,r){return void 0===r&&(r=!1),St(t)||ht(t)||!dt(t)||(bt(t)>1&&(t.set=t.add=t.clear=t.delete=At),Object.freeze(t),r&&yt(t,(function(t,r){return Ot(r,!0)}),!0)),t}function At(){vt(2)}function St(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function Pt(t){var r=or[t];return r||vt(18,t),r}function Tt(){return"production"===process.env.NODE_ENV||Ht||vt(0),Ht}function xt(t,r){r&&(Pt("Patches"),t.u=[],t.s=[],t.v=r)}function $t(t){Nt(t),t.p.forEach(Dt),t.p=null}function Nt(t){t===Ht&&(Ht=t.l)}function It(t){return Ht={p:[],l:Ht,h:t,m:!0,_:0}}function Dt(t){var r=t[Zt];0===r.i||1===r.i?r.j():r.O=!0}function zt(t,r){r._=r.p.length;var e=r.p[0],n=void 0!==t&&t!==e;return r.h.g||Pt("ES5").S(r,t,n),n?(e[Zt].P&&($t(r),vt(4)),dt(t)&&(t=Ct(r,t),r.l||kt(r,t)),r.u&&Pt("Patches").M(e[Zt],t,r.u,r.s)):t=Ct(r,e,[]),$t(r),r.u&&r.v(r.u,r.s),t!==Xt?t:void 0}function Ct(t,r,e){if(St(r))return r;var n=r[Zt];if(!n)return yt(r,(function(o,i){return Ft(t,n,r,o,i,e)}),!0),r;if(n.A!==t)return r;if(!n.P)return kt(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=Et(n.k):n.o;yt(3===n.i?new Set(o):o,(function(r,i){return Ft(t,n,o,r,i,e)})),kt(t,o,!1),e&&t.u&&Pt("Patches").R(n,e,t.u,t.s)}return n.o}function Ft(t,r,e,n,o,i){if("production"!==process.env.NODE_ENV&&o===e&&vt(5),ht(o)){var u=Ct(t,o,i&&r&&3!==r.i&&!_t(r.D,n)?i.concat(n):void 0);if(gt(e,n,u),!ht(u))return;t.m=!1}if(dt(o)&&!St(o)){if(!t.h.F&&t._<1)return;Ct(t,o),r&&r.A.l||kt(t,o)}}function kt(t,r,e){void 0===e&&(e=!1),t.h.F&&t.m&&Ot(r,e)}function Mt(t,r){var e=t[Zt];return(e?wt(e):t)[r]}function Rt(t,r){if(r in t)for(var e=Object.getPrototypeOf(t);e;){var n=Object.getOwnPropertyDescriptor(e,r);if(n)return n;e=Object.getPrototypeOf(e)}}function Ut(t){t.P||(t.P=!0,t.l&&Ut(t.l))}function Vt(t){t.o||(t.o=Et(t.t))}function Yt(t,r,e){var n=mt(r)?Pt("MapSet").N(r,e):jt(r)?Pt("MapSet").T(r,e):t.g?function(t,r){var e=Array.isArray(t),n={i:e?1:0,A:r?r.A:Tt(),P:!1,I:!1,D:{},l:r,t:t,k:null,o:null,j:null,C:!1},o=n,i=ir;e&&(o=[n],i=ur);var u=Proxy.revocable(o,i),a=u.revoke,c=u.proxy;return n.k=c,n.j=a,c}(r,e):Pt("ES5").J(r,e);return(e?e.A:Tt()).p.push(n),n}function Lt(t){return ht(t)||vt(22,t),function t(r){if(!dt(r))return r;var e,n=r[Zt],o=bt(r);if(n){if(!n.P&&(n.i<4||!Pt("ES5").K(n)))return n.t;n.I=!0,e=Bt(r,o),n.I=!1}else e=Bt(r,o);return yt(e,(function(r,o){n&&function(t,r){return 2===bt(t)?t.get(r):t[r]}(n.t,r)===o||gt(e,r,t(o))})),3===o?new Set(e):e}(t)}function Bt(t,r){switch(r){case 2:return new Map(t);case 3:return Array.from(t)}return Et(t)}var qt,Ht,Wt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Kt="undefined"!=typeof Map,Gt="undefined"!=typeof Set,Jt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Xt=Wt?Symbol.for("immer-nothing"):((qt={})["immer-nothing"]=!0,qt),Qt=Wt?Symbol.for("immer-draftable"):"__$immer_draftable",Zt=Wt?Symbol.for("immer-state"):"__$immer_state",tr={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},rr=""+Object.prototype.constructor,er="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,nr=Object.getOwnPropertyDescriptors||function(t){var r={};return er(t).forEach((function(e){r[e]=Object.getOwnPropertyDescriptor(t,e)})),r},or={},ir={get:function(t,r){if(r===Zt)return t;var e=wt(t);if(!_t(e,r))return function(t,r,e){var n,o=Rt(r,e);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,e,r);var n=e[r];return t.I||!dt(n)?n:n===Mt(t.t,r)?(Vt(t),t.o[r]=Yt(t.A.h,n,t)):n},has:function(t,r){return r in wt(t)},ownKeys:function(t){return Reflect.ownKeys(wt(t))},set:function(t,r,e){var n=Rt(wt(t),r);if(null==n?void 0:n.set)return n.set.call(t.k,e),!0;if(!t.P){var o=Mt(wt(t),r),i=null==o?void 0:o[Zt];if(i&&i.t===e)return t.o[r]=e,t.D[r]=!1,!0;if(function(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r}(e,o)&&(void 0!==e||_t(t.t,r)))return!0;Vt(t),Ut(t)}return t.o[r]===e&&"number"!=typeof e&&(void 0!==e||r in t.o)||(t.o[r]=e,t.D[r]=!0,!0)},deleteProperty:function(t,r){return void 0!==Mt(t.t,r)||r in t.t?(t.D[r]=!1,Vt(t),Ut(t)):delete t.D[r],t.o&&delete t.o[r],!0},getOwnPropertyDescriptor:function(t,r){var e=wt(t),n=Reflect.getOwnPropertyDescriptor(e,r);return n?{writable:!0,configurable:1!==t.i||"length"!==r,enumerable:n.enumerable,value:e[r]}:n},defineProperty:function(){vt(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){vt(12)}},ur={};yt(ir,(function(t,r){ur[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),ur.deleteProperty=function(t,r){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&vt(13),ir.deleteProperty.call(this,t[0],r)},ur.set=function(t,r,e){return"production"!==process.env.NODE_ENV&&"length"!==r&&isNaN(parseInt(r))&&vt(14),ir.set.call(this,t[0],r,e,t[0])};var ar=new(function(){function t(t){var r=this;this.g=Jt,this.F=!0,this.produce=function(t,e,n){if("function"==typeof t&&"function"!=typeof e){var o=e;e=t;var i=r;return function(t){var r=this;void 0===t&&(t=o);for(var n=arguments.length,u=Array(n>1?n-1:0),a=1;a<n;a++)u[a-1]=arguments[a];return i.produce(t,(function(t){var n;return(n=e).call.apply(n,[r,t].concat(u))}))}}var u;if("function"!=typeof e&&vt(6),void 0!==n&&"function"!=typeof n&&vt(7),dt(t)){var a=It(r),c=Yt(r,t,void 0),s=!0;try{u=e(c),s=!1}finally{s?$t(a):Nt(a)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(t){return xt(a,n),zt(t,a)}),(function(t){throw $t(a),t})):(xt(a,n),zt(u,a))}if(!t||"object"!=typeof t){if((u=e(t))===Xt)return;return void 0===u&&(u=t),r.F&&Ot(u,!0),u}vt(21,t)},this.produceWithPatches=function(t,e){return"function"==typeof t?function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.produceWithPatches(e,(function(r){return t.apply(void 0,[r].concat(o))}))}:[r.produce(t,e,(function(t,r){n=t,o=r})),n,o];var n,o},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var r=t.prototype;return r.createDraft=function(t){dt(t)||vt(8),ht(t)&&(t=Lt(t));var r=It(this),e=Yt(this,t,void 0);return e[Zt].C=!0,Nt(r),e},r.finishDraft=function(t,r){var e=t&&t[Zt];"production"!==process.env.NODE_ENV&&(e&&e.C||vt(9),e.I&&vt(10));var n=e.A;return xt(n,r),zt(void 0,n)},r.setAutoFreeze=function(t){this.F=t},r.setUseProxies=function(t){t&&!Jt&&vt(20),this.g=t},r.applyPatches=function(t,r){var e;for(e=r.length-1;e>=0;e--){var n=r[e];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}var o=Pt("Patches").$;return ht(t)?o(t,r):this.produce(t,(function(t){return o(t,r.slice(e+1))}))},t}()),cr=ar.produce;ar.produceWithPatches.bind(ar),ar.setAutoFreeze.bind(ar),ar.setUseProxies.bind(ar),ar.applyPatches.bind(ar),ar.createDraft.bind(ar),ar.finishDraft.bind(ar);var sr=function(){this.__data__=[],this.size=0};var fr=function(t,r){return t===r||t!=t&&r!=r};var lr=function(t,r){for(var e=t.length;e--;)if(fr(t[e][0],r))return e;return-1},pr=Array.prototype.splice;var vr=function(t){var r=this.__data__,e=lr(r,t);return!(e<0)&&(e==r.length-1?r.pop():pr.call(r,e,1),--this.size,!0)};var hr=function(t){var r=this.__data__,e=lr(r,t);return e<0?void 0:r[e][1]};var dr=function(t){return lr(this.__data__,t)>-1};var yr=function(t,r){var e=this.__data__,n=lr(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function br(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}br.prototype.clear=sr,br.prototype.delete=vr,br.prototype.get=hr,br.prototype.has=dr,br.prototype.set=yr;var _r=br;var gr=function(){this.__data__=new _r,this.size=0};var mr=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e};var jr=function(t){return this.__data__.get(t)};var wr=function(t){return this.__data__.has(t)},Er="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Or(t,r){return t(r={exports:{}},r.exports),r.exports}var Ar="object"==typeof Er&&Er&&Er.Object===Object&&Er,Sr="object"==typeof self&&self&&self.Object===Object&&self,Pr=Ar||Sr||Function("return this")(),Tr=Pr.Symbol,xr=Object.prototype,$r=xr.hasOwnProperty,Nr=xr.toString,Ir=Tr?Tr.toStringTag:void 0;var Dr=function(t){var r=$r.call(t,Ir),e=t[Ir];try{t[Ir]=void 0;var n=!0}catch(t){}var o=Nr.call(t);return n&&(r?t[Ir]=e:delete t[Ir]),o},zr=Object.prototype.toString;var Cr=function(t){return zr.call(t)},Fr=Tr?Tr.toStringTag:void 0;var kr=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Fr&&Fr in Object(t)?Dr(t):Cr(t)};var Mr=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)};var Rr,Ur=function(t){if(!Mr(t))return!1;var r=kr(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},Vr=Pr["__core-js_shared__"],Yr=(Rr=/[^.]+$/.exec(Vr&&Vr.keys&&Vr.keys.IE_PROTO||""))?"Symbol(src)_1."+Rr:"";var Lr=function(t){return!!Yr&&Yr in t},Br=Function.prototype.toString;var qr=function(t){if(null!=t){try{return Br.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Hr=/^\[object .+?Constructor\]$/,Wr=Function.prototype,Kr=Object.prototype,Gr=Wr.toString,Jr=Kr.hasOwnProperty,Xr=RegExp("^"+Gr.call(Jr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qr=function(t){return!(!Mr(t)||Lr(t))&&(Ur(t)?Xr:Hr).test(qr(t))};var Zr=function(t,r){return null==t?void 0:t[r]};var te=function(t,r){var e=Zr(t,r);return Qr(e)?e:void 0},re=te(Pr,"Map"),ee=te(Object,"create");var ne=function(){this.__data__=ee?ee(null):{},this.size=0};var oe=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ie=Object.prototype.hasOwnProperty;var ue=function(t){var r=this.__data__;if(ee){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return ie.call(r,t)?r[t]:void 0},ae=Object.prototype.hasOwnProperty;var ce=function(t){var r=this.__data__;return ee?void 0!==r[t]:ae.call(r,t)};var se=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ee&&void 0===r?"__lodash_hash_undefined__":r,this};function fe(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}fe.prototype.clear=ne,fe.prototype.delete=oe,fe.prototype.get=ue,fe.prototype.has=ce,fe.prototype.set=se;var le=fe;var pe=function(){this.size=0,this.__data__={hash:new le,map:new(re||_r),string:new le}};var ve=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var he=function(t,r){var e=t.__data__;return ve(r)?e["string"==typeof r?"string":"hash"]:e.map};var de=function(t){var r=he(this,t).delete(t);return this.size-=r?1:0,r};var ye=function(t){return he(this,t).get(t)};var be=function(t){return he(this,t).has(t)};var _e=function(t,r){var e=he(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this};function ge(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}ge.prototype.clear=pe,ge.prototype.delete=de,ge.prototype.get=ye,ge.prototype.has=be,ge.prototype.set=_e;var me=ge;var je=function(t,r){var e=this.__data__;if(e instanceof _r){var n=e.__data__;if(!re||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new me(n)}return e.set(t,r),this.size=e.size,this};function we(t){var r=this.__data__=new _r(t);this.size=r.size}we.prototype.clear=gr,we.prototype.delete=mr,we.prototype.get=jr,we.prototype.has=wr,we.prototype.set=je;var Ee=we;var Oe=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Ae=function(t){return this.__data__.has(t)};function Se(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new me;++r<e;)this.add(t[r])}Se.prototype.add=Se.prototype.push=Oe,Se.prototype.has=Ae;var Pe=Se;var Te=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1};var xe=function(t,r){return t.has(r)};var $e=function(t,r,e,n,o,i){var u=1&e,a=t.length,c=r.length;if(a!=c&&!(u&&c>a))return!1;var s=i.get(t),f=i.get(r);if(s&&f)return s==r&&f==t;var l=-1,p=!0,v=2&e?new Pe:void 0;for(i.set(t,r),i.set(r,t);++l<a;){var h=t[l],d=r[l];if(n)var y=u?n(d,h,l,r,t,i):n(h,d,l,t,r,i);if(void 0!==y){if(y)continue;p=!1;break}if(v){if(!Te(r,(function(t,r){if(!xe(v,r)&&(h===t||o(h,t,e,n,i)))return v.push(r)}))){p=!1;break}}else if(h!==d&&!o(h,d,e,n,i)){p=!1;break}}return i.delete(t),i.delete(r),p},Ne=Pr.Uint8Array;var Ie=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var De=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},ze=Tr?Tr.prototype:void 0,Ce=ze?ze.valueOf:void 0;var Fe=function(t,r,e,n,o,i,u){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!i(new Ne(t),new Ne(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return fr(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var a=Ie;case"[object Set]":var c=1&n;if(a||(a=De),t.size!=r.size&&!c)return!1;var s=u.get(t);if(s)return s==r;n|=2,u.set(t,r);var f=$e(a(t),a(r),n,o,i,u);return u.delete(t),f;case"[object Symbol]":if(Ce)return Ce.call(t)==Ce.call(r)}return!1};var ke=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},Me=Array.isArray;var Re=function(t,r,e){var n=r(t);return Me(t)?n:ke(n,e(t))};var Ue=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,i=[];++e<n;){var u=t[e];r(u,e,t)&&(i[o++]=u)}return i};var Ve=function(){return[]},Ye=Object.prototype.propertyIsEnumerable,Le=Object.getOwnPropertySymbols,Be=Le?function(t){return null==t?[]:(t=Object(t),Ue(Le(t),(function(r){return Ye.call(t,r)})))}:Ve;var qe=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n};var He=function(t){return null!=t&&"object"==typeof t};var We=function(t){return He(t)&&"[object Arguments]"==kr(t)},Ke=Object.prototype,Ge=Ke.hasOwnProperty,Je=Ke.propertyIsEnumerable,Xe=We(function(){return arguments}())?We:function(t){return He(t)&&Ge.call(t,"callee")&&!Je.call(t,"callee")};var Qe=function(){return!1},Ze=Or((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e?Pr.Buffer:void 0,i=(o?o.isBuffer:void 0)||Qe;t.exports=i})),tn=/^(?:0|[1-9]\d*)$/;var rn=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&tn.test(t))&&t>-1&&t%1==0&&t<r};var en=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},nn={};nn["[object Float32Array]"]=nn["[object Float64Array]"]=nn["[object Int8Array]"]=nn["[object Int16Array]"]=nn["[object Int32Array]"]=nn["[object Uint8Array]"]=nn["[object Uint8ClampedArray]"]=nn["[object Uint16Array]"]=nn["[object Uint32Array]"]=!0,nn["[object Arguments]"]=nn["[object Array]"]=nn["[object ArrayBuffer]"]=nn["[object Boolean]"]=nn["[object DataView]"]=nn["[object Date]"]=nn["[object Error]"]=nn["[object Function]"]=nn["[object Map]"]=nn["[object Number]"]=nn["[object Object]"]=nn["[object RegExp]"]=nn["[object Set]"]=nn["[object String]"]=nn["[object WeakMap]"]=!1;var on=function(t){return He(t)&&en(t.length)&&!!nn[kr(t)]};var un=function(t){return function(r){return t(r)}},an=Or((function(t,r){var e=r&&!r.nodeType&&r,n=e&&t&&!t.nodeType&&t,o=n&&n.exports===e&&Ar.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),cn=an&&an.isTypedArray,sn=cn?un(cn):on,fn=Object.prototype.hasOwnProperty;var ln=function(t,r){var e=Me(t),n=!e&&Xe(t),o=!e&&!n&&Ze(t),i=!e&&!n&&!o&&sn(t),u=e||n||o||i,a=u?qe(t.length,String):[],c=a.length;for(var s in t)!r&&!fn.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||rn(s,c))||a.push(s);return a},pn=Object.prototype;var vn=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||pn)};var hn=function(t,r){return function(e){return t(r(e))}}(Object.keys,Object),dn=Object.prototype.hasOwnProperty;var yn=function(t){if(!vn(t))return hn(t);var r=[];for(var e in Object(t))dn.call(t,e)&&"constructor"!=e&&r.push(e);return r};var bn=function(t){return null!=t&&en(t.length)&&!Ur(t)};var _n=function(t){return bn(t)?ln(t):yn(t)};var gn=function(t){return Re(t,_n,Be)},mn=Object.prototype.hasOwnProperty;var jn=function(t,r,e,n,o,i){var u=1&e,a=gn(t),c=a.length;if(c!=gn(r).length&&!u)return!1;for(var s=c;s--;){var f=a[s];if(!(u?f in r:mn.call(r,f)))return!1}var l=i.get(t),p=i.get(r);if(l&&p)return l==r&&p==t;var v=!0;i.set(t,r),i.set(r,t);for(var h=u;++s<c;){var d=t[f=a[s]],y=r[f];if(n)var b=u?n(y,d,f,r,t,i):n(d,y,f,t,r,i);if(!(void 0===b?d===y||o(d,y,e,n,i):b)){v=!1;break}h||(h="constructor"==f)}if(v&&!h){var _=t.constructor,g=r.constructor;_==g||!("constructor"in t)||!("constructor"in r)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(v=!1)}return i.delete(t),i.delete(r),v},wn=te(Pr,"DataView"),En=te(Pr,"Promise"),On=te(Pr,"Set"),An=te(Pr,"WeakMap"),Sn=qr(wn),Pn=qr(re),Tn=qr(En),xn=qr(On),$n=qr(An),Nn=kr;(wn&&"[object DataView]"!=Nn(new wn(new ArrayBuffer(1)))||re&&"[object Map]"!=Nn(new re)||En&&"[object Promise]"!=Nn(En.resolve())||On&&"[object Set]"!=Nn(new On)||An&&"[object WeakMap]"!=Nn(new An))&&(Nn=function(t){var r=kr(t),e="[object Object]"==r?t.constructor:void 0,n=e?qr(e):"";if(n)switch(n){case Sn:return"[object DataView]";case Pn:return"[object Map]";case Tn:return"[object Promise]";case xn:return"[object Set]";case $n:return"[object WeakMap]"}return r});var In=Nn,Dn=Object.prototype.hasOwnProperty;var zn=function(t,r,e,n,o,i){var u=Me(t),a=Me(r),c=u?"[object Array]":In(t),s=a?"[object Array]":In(r),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),l="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s),p=c==s;if(p&&Ze(t)){if(!Ze(r))return!1;u=!0,f=!1}if(p&&!f)return i||(i=new Ee),u||sn(t)?$e(t,r,e,n,o,i):Fe(t,r,c,e,n,o,i);if(!(1&e)){var v=f&&Dn.call(t,"__wrapped__"),h=l&&Dn.call(r,"__wrapped__");if(v||h){var d=v?t.value():t,y=h?r.value():r;return i||(i=new Ee),o(d,y,e,n,i)}}return!!p&&(i||(i=new Ee),jn(t,r,e,n,o,i))};var Cn=function t(r,e,n,o,i){return r===e||(null==r||null==e||!He(r)&&!He(e)?r!=r&&e!=e:zn(r,e,n,o,t,i))};var Fn=function(t,r){return Cn(t,r)};var kn=function(t,r,e,n){for(var o=t.length,i=e+(n?1:-1);n?i--:++i<o;)if(r(t[i],i,t))return i;return-1};var Mn=function(t){return t!=t};var Rn=function(t,r,e){for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1};var Un=function(t,r,e){return r==r?Rn(t,r,e):kn(t,Mn,e)};var Vn=function(t,r){return!!(null==t?0:t.length)&&Un(t,r,0)>-1};var Yn=function(t,r,e){for(var n=-1,o=null==t?0:t.length;++n<o;)if(e(r,t[n]))return!0;return!1};var Ln=function(){},Bn=On&&1/De(new On([,-0]))[1]==1/0?function(t){return new On(t)}:Ln;var qn=function(t,r,e){var n=-1,o=Vn,i=t.length,u=!0,a=[],c=a;if(e)u=!1,o=Yn;else if(i>=200){var s=r?null:Bn(t);if(s)return De(s);u=!1,o=xe,c=new Pe}else c=r?[]:a;t:for(;++n<i;){var f=t[n],l=r?r(f):f;if(f=e||0!==f?f:0,u&&l==l){for(var p=c.length;p--;)if(c[p]===l)continue t;r&&c.push(l),a.push(f)}else o(c,l,e)||(c!==a&&c.push(l),a.push(f))}return a};var Hn=function(t){return t&&t.length?qn(t):[]};var Wn=function(t){return"symbol"==typeof t||He(t)&&"[object Symbol]"==kr(t)},Kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gn=/^\w*$/;var Jn=function(t,r){if(Me(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Wn(t))||(Gn.test(t)||!Kn.test(t)||null!=r&&t in Object(r))};function Xn(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return e.cache=i.set(o,u)||i,u};return e.cache=new(Xn.Cache||me),e}Xn.Cache=me;var Qn=Xn;var Zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/\\(\\)?/g,ro=function(t){var r=Qn(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Zn,(function(t,e,n,o){r.push(n?o.replace(to,"$1"):e||t)})),r}));var eo=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},no=Tr?Tr.prototype:void 0,oo=no?no.toString:void 0;var io=function t(r){if("string"==typeof r)return r;if(Me(r))return eo(r,t)+"";if(Wn(r))return oo?oo.call(r):"";var e=r+"";return"0"==e&&1/r==-1/0?"-0":e};var uo=function(t){return null==t?"":io(t)};var ao=function(t,r){return Me(t)?t:Jn(t,r)?[t]:ro(uo(t))};var co=function(t){if("string"==typeof t||Wn(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var so=function(t,r){for(var e=0,n=(r=ao(r,t)).length;null!=t&&e<n;)t=t[co(r[e++])];return e&&e==n?t:void 0};var fo=function(t,r,e){var n=null==t?void 0:so(t,r);return void 0===n?e:n},lo=Tr?Tr.isConcatSpreadable:void 0;var po=function(t){return Me(t)||Xe(t)||!!(lo&&t&&t[lo])};var vo=function t(r,e,n,o,i){var u=-1,a=r.length;for(n||(n=po),i||(i=[]);++u<a;){var c=r[u];e>0&&n(c)?e>1?t(c,e-1,n,o,i):ke(i,c):o||(i[i.length]=c)}return i};var ho=function(t,r,e,n){var o=e.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=e[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var c=(a=e[o])[0],s=t[c],f=a[1];if(u&&a[2]){if(void 0===s&&!(c in t))return!1}else{var l=new Ee;if(n)var p=n(s,f,c,t,r,l);if(!(void 0===p?Cn(f,s,3,n,l):p))return!1}}return!0};var yo=function(t){return t==t&&!Mr(t)};var bo=function(t){for(var r=_n(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,yo(o)]}return r};var _o=function(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}};var go=function(t){var r=bo(t);return 1==r.length&&r[0][2]?_o(r[0][0],r[0][1]):function(e){return e===t||ho(e,t,r)}};var mo=function(t,r){return null!=t&&r in Object(t)};var jo=function(t,r,e){for(var n=-1,o=(r=ao(r,t)).length,i=!1;++n<o;){var u=co(r[n]);if(!(i=null!=t&&e(t,u)))break;t=t[u]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&en(o)&&rn(u,o)&&(Me(t)||Xe(t))};var wo=function(t,r){return null!=t&&jo(t,r,mo)};var Eo=function(t,r){return Jn(t)&&yo(r)?_o(co(t),r):function(e){var n=fo(e,t);return void 0===n&&n===r?wo(e,t):Cn(r,n,3)}};var Oo=function(t){return t};var Ao=function(t){return function(r){return null==r?void 0:r[t]}};var So=function(t){return function(r){return so(r,t)}};var Po=function(t){return Jn(t)?Ao(co(t)):So(t)};var To=function(t){return"function"==typeof t?t:null==t?Oo:"object"==typeof t?Me(t)?Eo(t[0],t[1]):go(t):Po(t)};var xo=function(t){return function(r,e,n){for(var o=-1,i=Object(r),u=n(r),a=u.length;a--;){var c=u[t?a:++o];if(!1===e(i[c],c,i))break}return r}}();var $o=function(t,r){return function(e,n){if(null==e)return e;if(!bn(e))return t(e,n);for(var o=e.length,i=r?o:-1,u=Object(e);(r?i--:++i<o)&&!1!==n(u[i],i,u););return e}}((function(t,r){return t&&xo(t,r,_n)}));var No=function(t,r){var e=-1,n=bn(t)?Array(t.length):[];return $o(t,(function(t,o,i){n[++e]=r(t,o,i)})),n};var Io=function(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t};var Do=function(t,r){if(t!==r){var e=void 0!==t,n=null===t,o=t==t,i=Wn(t),u=void 0!==r,a=null===r,c=r==r,s=Wn(r);if(!a&&!s&&!i&&t>r||i&&u&&c&&!a&&!s||n&&u&&c||!e&&c||!o)return 1;if(!n&&!i&&!s&&t<r||s&&e&&o&&!n&&!i||a&&e&&o||!u&&o||!c)return-1}return 0};var zo=function(t,r,e){for(var n=-1,o=t.criteria,i=r.criteria,u=o.length,a=e.length;++n<u;){var c=Do(o[n],i[n]);if(c)return n>=a?c:c*("desc"==e[n]?-1:1)}return t.index-r.index};var Co=function(t,r,e){r=r.length?eo(r,(function(t){return Me(t)?function(r){return so(r,1===t.length?t[0]:t)}:t})):[Oo];var n=-1;r=eo(r,un(To));var o=No(t,(function(t,e,o){return{criteria:eo(r,(function(r){return r(t)})),index:++n,value:t}}));return Io(o,(function(t,r){return zo(t,r,e)}))};var Fo=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},ko=Math.max;var Mo=function(t,r,e){return r=ko(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=ko(n.length-r,0),u=Array(i);++o<i;)u[o]=n[r+o];o=-1;for(var a=Array(r+1);++o<r;)a[o]=n[o];return a[r]=e(u),Fo(t,this,a)}};var Ro=function(t){return function(){return t}},Uo=function(){try{var t=te(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Vo=Uo?function(t,r){return Uo(t,"toString",{configurable:!0,enumerable:!1,value:Ro(r),writable:!0})}:Oo,Yo=Date.now;var Lo=function(t){var r=0,e=0;return function(){var n=Yo(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(Vo);var Bo=function(t,r,e){if(!Mr(e))return!1;var n=typeof r;return!!("number"==n?bn(e)&&rn(r,e.length):"string"==n&&r in e)&&fr(e[r],t)},qo=function(t,r){return Lo(Mo(t,r,Oo),t+"")}((function(t,r){if(null==t)return[];var e=r.length;return e>1&&Bo(t,r[0],r[1])?r=[]:e>2&&Bo(r[0],r[1],r[2])&&(r=[r[0]]),Co(t,vo(r,1),[])}));const Ho=Symbol("type:map"),Wo=Symbol("type:object"),Ko=Symbol("type:value"),Go=Symbol("unnamed"),Jo=Symbol("ABSENT"),Xo=Symbol("CHILDREN");var Qo=Object.freeze({__proto__:null,TYPE_MAP:Ho,TYPE_OBJECT:Wo,TYPE_VALUE:Ko,NAME_UNNAMED:Go,ABSENT:Jo,CHILDREN:Xo,EVENT_TYPE_NEXT:"next",EVENT_TYPE_SHARD:"next:shard",EVENT_TYPE_TRY:"try",EVENT_TYPE_ACCEPT_AFTER:"event:acceptAfter",EVENT_TYPE_REMOVE_AFTER:"event:removeAfter",EVENT_TYPE_CHILD_ADDED:"child:added",EVENT_TYPE_REVERT:"event:revert",EVENT_TYPE_COMMIT:"event:commit",EVENT_TYPE_COMMIT_CHILDREN:"event:commit:children",EVENT_TYPE_VALIDATE:"event:validate",EVENT_TYPE_ACTION:"event:action",EVENT_TYPE_MUTATE:"event:mutate",SET_RE:/^set(.+)$/i,TRANS_TYPE_CHANGE:"trans:change",TRANS_TYPE_ACTION:"trans:action",TRANS_STATE_NEW:"trans:state:new",TRANS_STATE_ERROR:"trans:state:error",TRANS_STATE_COMPLETE:"trans:state:complete"});function Zo(t){return![Jo,Go,void 0].includes(t)}function ti(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Map)}function ri(t,r=!1){return Array.isArray(t)&&(!r||t.length)}const ei=t=>t&&t instanceof Map;const ni=require("lodash/isNumber");var oi=Object.freeze({__proto__:null,lazy:F,produce:cr,isEqual:Fn,uniq:Hn,lGet:fo,sortBy:qo,isNumber:ni,isThere:Zo,isObj:ti,isArr:ri,isMap:ei,isFn:t=>"function"==typeof t,e:(t,r={})=>("string"==typeof t&&(t=new Error(t)),Zo(r)?ti(r)||(r={notes:r}):r={},Object.assign(t,r)),isStr:function(t,r=!1){return"string"==typeof t&&(!r||!!t)},toObj:function(t,r=!1){if(!ti(t)&&!ei(t))throw Object.assign(new Error("cannot convert target to object"),{target:t});let e=t;return ti(t)?r&&(e={...t}):ei(t)&&(e={},t.forEach((r,n)=>{if("number"==typeof n||"string"==typeof n)try{e[n]=r}catch(r){console.warn("toObj map/object conversion -- skipping exporting of child key",n,"of ",t)}})),e}});let ii=0;class ui extends C{constructor(t,r,e){super(t),this.$type=r,this.$target=e,this.$id=lt(),this.$order=ii,ii+=1}getValue(){return this._value}matches(t){return t===this||t===this.$id}$isAfter(t){return ni(t)?this.$order>t:t instanceof ui&&this.$isAfter(t.$order)}}var ai=t=>class extends t{get $events(){return F(this,"$_events",t=>{const r=new D;return r.subscribe({next(r){t.$_pushActive(r)},error(t){}}),r})}get $_active(){return F(this,"$__active",()=>[])}set $_active(t){ri(t)&&(this.$__active=t,this.$watchActive&&this.$watchActive(t))}$_removeFromActive(t,r=!1){const e=this.$_active.filter(e=>!e.matches(t)||r&&e.$isAfter(t));this.$_active=e}$_pushActive(t){if(!t||t.isStopped)return;this.$_active=[...this.$_active,t];const r=this;return t.$resolvers=t.subscribe({complete(){"next"!==t.$type&&r.$_removeFromActive(t),r.$commit()},error(e){r.$reset(t,e)}}),t.$resolvers}$commit(){if(this.$_active.length&&!this.$_active.some(t=>!t.isStopped)){if(!this.$_active.some(t=>t.hasError)){const t=this.$lastChange;t&&this.$next(t.value)}this.$_active=[]}}$reset(t,r){const e=this.$_active.filter(r=>!r.matches(t)&&!r.isStopped);e.length&&e.pop().error(r),this.$_active.includes(t)&&this.$_removeFromActive(t,!0)}get $lastChange(){return this.$__active?this.$_active.reduce((t,r)=>"next"!==r.$type||r.hasError?t:r,null):null}$send(t,r,e=!1){const n=new ui(r,t,this);return this.$events.next(n),n.isStopped||e||n.complete(),n}$on(t,r){return this.$events.pipe((e=r=>r.$type===t,$((function(t,r){var o=0;t.subscribe(new N(r,(function(t){return e.call(n,t,o++)&&r.next(t)})))})))).subscribe({next(t){if(!t.isStopped)try{r(t)}catch(r){t.isStopped||t.error(r)}}});var e,n}};class ci extends(ai(C)){constructor(t){super(t)}next(t){this.$send("next",t)}$next(t){super.next(t)}getValue(){const t=this.$lastChange;return t?t.value:super.getValue()}}return Object.assign(ci.prototype,ai),{...Qo,...pt,idGen:pt,utils:oi,Mirror:ci}}));
